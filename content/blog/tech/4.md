---
title: التحسينات الأمنية وطبقات الحماية قبل تخزين البيانات
description: اهم طبقات الحماية في الباك اند
---
# التحسينات الأمنية وطبقات الحماية قبل تخزين البيانات في تطبيقات الباك إند

أمان التطبيقات يعتبر من أولويات المطورين، خاصةً عندما يتعلق الأمر بتخزين البيانات الحساسة. من الضروري اتخاذ خطوات استباقية لحماية هذه البيانات منذ البداية. في هذا المقال، سنستعرض أهم طبقات الحماية التي يجب تطبيقها في مرحلة ما قبل تخزين البيانات في قاعدة البيانات.

##  **التحقق من صحة البيانات (Validation)**

أول خطوة لحماية البيانات هي التأكد من صحتها عند إدخالها. يمكن استخدام مكتبات مثل `joi` أو `express-validator` للتحقق من أن البيانات المدخلة تتبع التنسيق الصحيح، مثل التأكد من أن البريد الإلكتروني صحيح أو أن كلمة المرور تتوافق مع الحد الأدنى للطول.

**مثال:** التأكد من أن البريد الإلكتروني يحتوي على "@" وأن كلمة المرور تحتوي على مزيج من الأحرف الكبيرة والصغيرة والأرقام.

##  **تنظيف البيانات (Sanitization)**

بعد التحقق من صحة البيانات، يجب تنظيفها للتأكد من أنها خالية من أي نصوص ضارة قد يتم استغلالها في هجمات مثل **XSS** (البرمجة النصية عبر المواقع). يمكن استخدام مكتبة `express-validator` لتنظيف المدخلات، مثل تطبيع البريد الإلكتروني (أي تحويله إلى تنسيق موحد) أو إزالة الأكواد الضارة من النصوص المدخلة.

##  **التحقق من تكرار البريد الإلكتروني (Duplicate Check)**

قبل تخزين البيانات في قاعدة البيانات، من الضروري التحقق من عدم وجود بيانات مكررة، خاصةً في الحقول الأساسية مثل البريد الإلكتروني. هذه خطوة مهمة لتجنب إنشاء حسابات مكررة أو حدوث أخطاء أثناء التسجيل. يمكن فحص قاعدة البيانات للتحقق من وجود البريد الإلكتروني مسبقًا، ما يمنع إدخال نفس البريد الإلكتروني أكثر من مرة.
### المقترحات:
لحل مشكلة التحقق من تكرار البريد الإلكتروني قبل تخزين البيانات في قاعدة البيانات، يمكنك اتباع الخطوات التالية:

1. **التحقق من البريد الإلكتروني قبل التخزين:**
   قبل إدخال البريد الإلكتروني في قاعدة البيانات، قم بالتحقق إذا كان البريد الإلكتروني موجودًا مسبقًا باستخدام استعلام SQL. 
   
   ```sql
   SELECT COUNT(*) FROM users WHERE email = 'email@example.com';
   ```

   إذا كانت النتيجة أكبر من 0، يعني أن البريد الإلكتروني موجود بالفعل، ويمكنك منع عملية التسجيل أو التحديث.

2. **استخدام معايير فريدة للبريد الإلكتروني:**
   يجب التأكد من أن عمود البريد الإلكتروني في قاعدة البيانات معرف كـ `UNIQUE` لضمان عدم إدخال تكرارات في المستقبل.

   ```sql
   ALTER TABLE users ADD CONSTRAINT unique_email UNIQUE(email);
   ```


3. **تعامل مع الأخطاء:**
   في حال تم العثور على بريد إلكتروني مكرر، يمكنك إرجاع رسالة للمستخدم تفيده بأنه تم استخدام البريد الإلكتروني من قبل أو أنه بالفعل موجود في النظام.

4. **إجراء التحقق في الخلفية (Server-side):**
   إذا كنت تستخدم JavaScript في واجهة المستخدم، تأكد من إجراء التحقق الأساسي أولاً في جانب الخادم (server-side) لتجنب التلاعب من قبل المستخدمين.

بتطبيق هذه الخطوات، ستكون قد ضمنت عدم إدخال البريد الإلكتروني نفسه أكثر من مرة في قاعدة البيانات.

##  **استخدام الأعمدة الفريدة في قاعدة البيانات (Unique Constraints)**

من أفضل الممارسات هو جعل الحقول الأساسية مثل البريد الإلكتروني أو اسم المستخدم فريدة في قاعدة البيانات باستخدام الأعمدة الفريدة (Unique Constraints). هذا يضمن عدم تكرار البيانات ويساهم في منع الهجمات مثل محاولة استخدام نفس البيانات في تسجيل الدخول.

##  **تشفير كلمة المرور (Password Hashing)**

لحماية كلمات المرور من التسريب في حال حدوث اختراق، يجب تشفير كلمات المرور باستخدام خوارزميات قوية مثل `bcrypt` قبل تخزينها في قاعدة البيانات. عملية **هاشينغ** (Hashing) تجعل من المستحيل استرجاع كلمة المرور الأصلية حتى إذا تم الوصول إلى قاعدة البيانات.

##  **تحديد عدد المحاولات (Rate Limiting)**

من التدابير الأمنية المهمة التي يجب اتخاذها هي تقييد عدد محاولات الوصول إلى النظام من نفس الـIP خلال فترة زمنية محددة. يمكن استخدام مكتبة مثل `express-rate-limit` لمنع الهجمات العشوائية (Brute Force)، حيث يتيح لك تحديد عدد المحاولات الفاشلة التي يمكن إجراؤها قبل أن يتم حظر المستخدم لفترة من الوقت.

##  **إدارة الأخطاء (Error Handling)**

أحد جوانب الأمان الهامة هو التعامل مع الأخطاء بطريقة تحمي المعلومات الحساسة. يجب أن يتم التعامل مع الأخطاء الناتجة عن قاعدة البيانات أو التكرار بطريقة لا تكشف عن تفاصيل النظام أو قاعدة البيانات للمهاجمين. من الأفضل تسجيل الأخطاء في ملفات لوج خاصة وطمس أي معلومات قد تكون مفيدة للهجمات.

##  **التأكد من اتصال قاعدة البيانات (Database Query Handling)**

عند التعامل مع الاستعلامات إلى قاعدة البيانات، يجب التأكد من أنها آمنة. من أفضل الممارسات استخدام **Prepared Statements** بدلاً من الاستعلامات الديناميكية التي قد تكون عرضة لهجمات **SQL Injection**. هذا يضمن أن البيانات المدخلة لا يمكن استخدامها لتغيير الاستعلامات بطريقة ضارة.

##  **استخدام HTTPS**

تأمين الاتصال بين العميل والخادم أمر بالغ الأهمية. باستخدام بروتوكول **HTTPS**، يتم تشفير البيانات المرسلة بين المتصفح والخادم، مما يجعل من الصعب على المهاجمين اعتراض أو تعديل البيانات أثناء انتقالها.

##  **حماية من هجمات XSS وCSRF**

من الهجمات الشائعة على الويب **XSS** (البرمجة النصية عبر المواقع) و**CSRF** (تزوير الطلبات بين المواقع). يمكن استخدام مكتبات مثل `helmet` و`csurf` لتأمين التطبيق ضد هذه الأنواع من الهجمات. `helmet` تساعد في إضافة رؤوس أمان (Security Headers) إلى الاستجابات، بينما `csurf` تمنع الهجمات التي تستهدف مستخدمي التطبيق عبر إرسال طلبات غير مصرح بها.
## النصيحة النهائية

تطبيق هذه الطبقات الأمنية بشكل متكامل يمكن أن يعزز بشكل كبير أمان تطبيقك ويقلل من احتمالية تعرضه للهجمات. تجنب أخذ الأمور بشكل سطحي، وتأكد من أن كل طبقة حماية تعمل كما هو مطلوب قبل تخزين البيانات الحساسة.